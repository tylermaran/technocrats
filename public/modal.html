<html>

<head>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
  <style>
    .error {
      color: red;
    }

    body {
      display: flex;
      min-height: 100vh;
      flex-direction: column;
    }

    main {
      flex: 1 0 auto;
    }

    body {
      background: #fff;
    }

    .input-field input[type=date]:focus+label,
    .input-field input[type=text]:focus+label,
    .input-field input[type=email]:focus+label,
    .input-field input[type=password]:focus+label {
      color: #e91e63;
    }

    .input-field input[type=date]:focus,
    .input-field input[type=text]:focus,
    .input-field input[type=email]:focus,
    .input-field input[type=password]:focus {
      border-bottom: 2px solid #e91e63;
      box-shadow: none;
    }
  </style>
</head>

<body>

  <!-- Modal Trigger -->
  <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a>

  <!-- Modal Structure -->
  <div id="modal1" class="modal">
    <div class="modal-content">
      <div class="row">
        <form class="col s12 formValidate needs-validation" id="formValidate" method="get" action novalidate="novalidate">
          <div class="row">
            <div class="input-field col s6">
              <input id="fname" type="text" class="validate">
              <label for="fname">First Name</label>
            </div>
            <div class="input-field col s6">
              <input id="lname" type="text" class="validate">
              <label for="lname">Last Name</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input id="password" type="password" name="password" class="validate">
              <label for="password">Password</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input id="confirm-password" type="password" name="confirm_password" class="validate">
              <label for="confirm_password">Confirm Password</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input id="email" type="email" class="validate">
              <label for="email">Email</label>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="modal-footer">
      <button id="signup_submit" class="btn waves-effect waves-light right submit" type="submit" value="submit">Submit
      </button>
      <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
    </div>
  </div>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.17.0/dist/jquery.validate.min.js"></script>
  <script>
    //var instance = M.Modal.getInstance(elem);
    // $(".modal")
    //instance.open();
    $(".modal-trigger").on("click", function() {
      // alert("hey")

      $('#modal1').modal({
        dismissible: true, // Modal can be dismissed by clicking outside of the modal
        opacity: .5, // Opacity of modal background
        inDuration: 300, // Transition in duration
        outDuration: 200, // Transition out duration
        startingTop: '4%', // Starting top style attribute
        endingTop: '10%', // Ending top style attribute
        // ready: function(modal, trigger) { // Callback for Modal open. Modal and trigger parameters available.
        //   alert("Ready");
        //   console.log(modal, trigger);
        // },
        // complete: function() {
        //   alert('Closed');
        // } // Callback for Modal close
      });
    });
    $("#formValidate").on('submit', function(e) {
      var isvalid = $("#signup_submit").valid();
      if (isvalid) {
        e.preventDefault();
        // alert(getvalues("myform"));
        console.log('no submit');
      }
    });
    $(".formValidate").validate({
      rules: {
        fname: {
          required: true,
          minlength: 2
        },
        lname: {
          required: true,
          minlength: 2
        },
        email: {
          required: true,
          email: true
        },
        password: {
          required: true,
          minlength: 5
        },
        confirm_password: {
          required: true,
          minlength: 5,
          equalTo: "#password"
        }
      },

      //For custom messages
      messages: {
        fname: {
          required: "Please enter your first name.",
          minlength: "You sure you're named with one letter?"
        },
        lname: {
          required: "Please enter your last name.",
          minlength: "You sure you're named with one letter?"
        },
        email: {
          required: "Please enter your email address.",
          email: "Please enter a valid email address."
        },
        pass: {
          required: "Please enter a password.",
          minlength: "Password must be atleast 5 characters."
        },
        confirm_pass: {
          required: "Please confirm your password.",
          minlength: "Password must be atleast 5 characters.",
          equalTo: "Password does not match."
        }
      },
      errorElement: 'div',
      errorPlacement: function(error, element) {
        var placement = $(element).data('error');
        if (placement) {
          $(placement).append(error)
        } else {
          error.insertAfter(element);
        }
      }
    });
  </script>

</body>

</html>
